window.addEventListener("error",(function(e){this.dispatchEvent(window.ErrorGetLast),console.log("[ErrorHandler.js] ",e)}));var Boot=function(e){var t,s={settings:$.extend({disabled:{},autoStart:!0},e),_className:this.constructor.name,__construct:function(){!0===t.settings.autoStart&&t.startBootSequence()},startBootSequence:function(){for(var e in t.sequence)if(!t.settings.disabled.hasOwnProperty(e))switch(typeof t.sequence[e]){case"function":t.sequence[e]();break;case"object":t.sequence[e].hasOwnProperty("__construct")&&t.sequence[e].__construct()}},sequence:{ElementsPrototyping:function(){Object.keys||(Object.keys=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=s.length;return function(r){if("object"!=typeof r&&("function"!=typeof r||null===r))throw new TypeError("Object.keys called on non-object");var o,n,i=[];for(o in r)e.call(r,o)&&i.push(o);if(t)for(n=0;n<a;n++)e.call(r,s[n])&&i.push(s[n]);return i}}()),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var s;if(null==this)throw new TypeError('"this" is null or not defined');var a=Object(this),r=a.length>>>0;if(0===r)return-1;var o=+t||0;if(Math.abs(o)===1/0&&(o=0),o>=r)return-1;for(s=Math.max(o>=0?o:r-Math.abs(o),0);s<r;){if(s in a&&a[s]===e)return s;s++}return-1}),Object.hasOwnProperty("hasOwnValue")||Object.defineProperty(Object.prototype,"hasOwnValue",{value:function(e){for(var t in this)if(this.hasOwnProperty(t)&&this[t]===e)return t;return!1},enumerable:!1}),Object.hasOwnProperty("elemOffset")||Object.defineProperty(Object.prototype,"elemOffset",{value:function(){if(null==this)throw new TypeError("["+t._className+".ElementsPrototyping."+arguments.callee.name+'] "this" is null or not defined');var e=this.getBoundingClientRect(),s=document.body;return{top:e.top+s.scrollTop,left:e.left+s.scrollLeft}},enumerable:!1,writable:!1})},RemoveAlertNoscript:function(){var e=document.getElementById("alert_noscript");e&&e.parentNode.removeChild(e)},ToggleBtnsReset:function(){$(".menu_toggler").attr("autocomplete",0)},OldBrowsersAlert:function(){if($("html").addClass("js"),!Modernizr.svg){var e=$("<div class='browser_alert' />"),t=$("<div />");e.css({width:"100%",background:"#000000",zIndex:1e3,position:"relative"}),t.css({color:"#FFFFFF",padding:"10px 0 10px 0",fontSize:"11px",lineHeight:"15px",textAlign:"center"}).html(arTrads.alert_browser),t.appendTo(e),e.prependTo("body")}},CookieAlert:function(){var e=document.getElementById("alert_cookies");if(e){var t={dimension:"margin-top",value:0},s={},a=(new RegExp(/cookie_alert\.php(\?.*)?/),0),r=0;$(window).on("resize",(function(){parseInt($(e).outerHeight(!0),10);t.value=parseInt($(e).next().css(t.dimension),10)})),$(window).on("scroll",(function(){window.windowScrollTop>10&&!a&&!r&&(r=1,$("#banner_cookie_site_ok").trigger("click"))})),$(document).on("click","a",(function(o){o.preventDefault();var n=this.href,i=$(this).hasClass("noredirect");r=1,new RegExp(/\/cookies/).test(n)||1==a?(r=0,i||(window.location=n)):$.get("/cookie_alert.php?c=1&is_ajax=1",(function(o){if(r=0,1!=parseInt(o,10))return!1;a=1,s[t.dimension]=0,$(e).addClass("accepted"),setTimeout((function(){e.remove(),e=null,!i&&n&&"string"==typeof n&&(window.location=n)}),500)}))}))}},IsTouchDevice:function(){"ontouchstart"in window||navigator.maxTouchPoints?$("html").addClass("touch").removeClass("no-touch"):$("html").addClass("no-touch").removeClass("touch")},SVGFallback:function(){Modernizr.svg||$('img[src$=".svg"]').each((function(){var e=new RegExp("^/immagini_layout/","g"),t=void 0!==$(this).data("fallback")?$(this).data("fallback"):$(this).attr("src").replace(e,"/immagini_layout/svg_fallback/").replace(/\.svg$/,".png");$(this).attr("src",t)}))},DisplayWindowWidth:function(){if(window.developmentMode){var e=$("<div />").css({padding:20,background:"rgba(255,255,255,.5)",position:"fixed",bottom:0,right:0,zIndex:1e3});$(window).on("resize",(function(){e.text($(this).width())})).resize(),e.prependTo("body")}},FluidScrollListener:function(){$(".fluid_scroll",$(document)).on("click",(function(e){e.preventDefault(),t.utils.animateScroll(this)}))},HoverManager:function(){$(document).on("touchstart",".touch .touch_hover,.has_tooltip",(function(e){e.stopPropagation(),e.stopImmediatePropagation(),$(this).toggleClass("hover")}))},ManageTornaSu:function(){var e=document.getElementById("torna_su_btn");window.addEventListener("scroll",(function(){window.windowScrollTop>window.windowInnerHeight/2?$(e).addClass("show_btn"):$(e).removeClass("show_btn")}),!1),null===e&&console.log("["+t._className+"."+arguments.callee.name+'] Non è presente un pulsante "torna_su_btn" nella pagina o è sbaglito l\'identificativo')},ManageFancyApps:function(){$(".ej_com_popup").on("click",(function(e){e.preventDefault();var t=document.getElementById("alert_cookies");if(void 0===$.fancybox||t)return!1;var s=$(this).attr("rel"),a=$(this).parent("li").index();if(a&&a>=0&&(options.index=a),s)$.fancybox.open($('*[rel="'+s+'"]'));else{var r=this.href;$.fancybox.open({src:r})}}))},SubmenuManager:function(){$("#pages_menu .menu_toggler").on("change",(function(e){$("#pages_menu .menu_toggler:checked").not($(this)).prop("checked",!1)}))}},utils:{animateScroll:function(e){var s=t.utils.getScrollStopBefore(e);dest_top=t.utils.getScrollDestination(e),$("html,body").animate({scrollTop:dest_top-s+"px"})},getScrollDestination:function(e){var s=void 0!==e.href&&-1!=e.href.indexOf("#")?e.href.split("#").pop():null;switch(!0){case null===s:console.log("["+t._className+"."+arguments.callee.name+"] Non è indicata la destinazione o il link è verso l'esterno e non ha senso lo scroll fluido");break;case null!==s&&!s.length:break;case void 0===document.getElementById(s):console.log("["+t._className+"."+arguments.callee.name+"] Non è presente alcun elemento nella pagina con id "+s);break;case null===document.getElementById(s):console.log("["+t._className+"."+arguments.callee.name+"] Non è presente alcun elemento nella pagina o è sbaglito l'identificativo")}return 0==s.length?0:parseFloat($("#"+s).offset().top,10)},getScrollStopBefore:function(e){return void 0!==e.dataset.stop_before?parseInt(e.dataset.stop_before,10):0}}};return t=s,s.__construct(),s},Messenger=function(e){var t,s={settings:$.extend({use_overlay:!1,container:$("#contenitore")},e),msg_box:null,msg_container:null,msg:null,close_btn:null,t:null,is_visible:!1,__construct:function(){if(t.settings.container.length<=0)return console.debug("[Messenger."+arguments.callee.name+"] Non è presente in pagina l'oggetto container: non posso continuare nella costruzione dell'oggetto"),!1;t.close_btn=$("<button>"+arTrads.chiudi+"</button>").attr("id","messenger_close_btn").on("click",(function(){t.closeMessenger()})),t.msg=$("<div />").attr("id","messenger_msg"),t.msg_container=$("<div />").attr("id","messenger_msg_container").append(t.close_btn).append(t.msg),t.msg_box=$("<div />").attr("id","messenger_box").append(t.msg_container).appendTo(t.settings.container),1==t.settings.use_overlay&&t.msg_box.addClass("has_overlay")},closeMessenger:function(){clearTimeout(t.t),t.t=setTimeout((function(){t.msg.empty()}),500),t.msg_box.removeClass("visible"),t.is_visible=!1,$(document).trigger("messenger_closed")},showMessenger:function(e){clearTimeout(t.t),void 0!==e&&e.length&&(t.msg.html(e),t.msg_box.addClass("visible"),t.is_visible=!0,$(document).trigger("messenger_opened"))},setClass:function(e){return t.msg_container.removeClass(),void 0!==e&&t.msg_container.addClass(e),t},getClass:function(e){return void 0!==e?t.msg_container.hasClass(e):t.msg_container.attr("class")}};return t=s,s.__construct(),s},FormClass=function(e){var t,s={settings:$.extend({objForm:null,formName:null,sendPage:null,validationType:2,placeholderFallback:!1,automaticTabindex:!0,clearFormOnSuccess:!0,tooltipDurationOnSuccess:1e4,arFileTypes:["pdf"],maxFileSize:5242880,fileUploadScript:"file_upload.php",showMessageOnSuccess:!0},e),data:null,objForm:null,actionPage:null,sendPage:null,formName:null,formId:null,formInputs:null,formData:null,tooltipMsg:"",tooltipAnchor:null,arMsgs:{},listenForSubmissionActive:!0,blocco:0,loading:null,validationSupport:{},submit_btn:null,t:null,callback:null,disableLoading:!1,construct:function(){return!(!t.settings.objForm||null==t.settings.objForm)&&(t.objForm=t.settings.objForm,!(t.objForm.length<=0)&&(t.actionPage=t.settings.objForm.attr("action"),t.formId=t.objForm.attr("id"),t.formName=t.settings.formName?t.settings.formName:t.formId.split("_").shift(),t.sendPage=t.settings.sendPage,"object"==typeof window.arTrads&&(t.arMsgs=window.arTrads),1==t.settings.disableLoading?t.loading=$():LOADING?t.loading=LOADING:$("body > .loading_popup").length>0?t.loading=$("body > .loading_popup"):t.loading=$('<div class="loading_popup loading"></div>').css({width:"100%",height:"100%",display:"none",position:"fixed",top:0,left:0,zIndex:1e3,opacity:.9}).prependTo($("body")).hide(0),t.tooltipAnchor=$(t.objForm).find("fieldset")?$(t.objForm).find("fieldset").last():$(t.objForm),t.managePlaceholders(),t.automaticTabindex(),t.prepareFileUpload(),t.listenForSubmission(),t.listenForTooltipRemoval(),t.customizeSelect(),void $(document).on("update_form",(function(){t.automaticTabindex(),t.customizeSelect()}))))},managePlaceholders:function(){switch(t.settings.placeholderFallback){case 2:case 1:t.listenPlaceholders()}},listenPlaceholders:function(){switch(!1===t.settings.placeholderFallback&&(t.settings.placeholderFallback=2),t.settings.placeholderFallback){case 1:$("input,textarea,select",t.objForm).each((function(){this.value&&$(this).prev(".placeholder").addClass("input_has_content")})),$("input,textarea",t.objForm).on({blur:function(){this.value?$(this).prev(".placeholder").addClass("input_has_content"):$(this).prev(".placeholder").removeClass("input_has_content")},focus:function(){$(this).prev(".placeholder").addClass("input_has_content")},change:function(){$(this).prev(".placeholder").addClass("input_has_content")}}),$("select",t.objForm).on({change:function(){this.value?$(this).prev(".placeholder").addClass("input_has_content"):$(this).prev(".placeholder").removeClass("input_has_content")}});break;case 2:$("input,textarea,select",t.objForm).each((function(){this.value&&$(this).prev(".placeholder").hide()})),$("input,textarea",t.objForm).on({blur:function(){this.value?$(this).prev(".placeholder").hide():$(this).prev(".placeholder").show()},focus:function(){this.value?$(this).prev(".placeholder").hide():$(this).prev(".placeholder").show()},change:function(){this.value?$(this).prev(".placeholder").hide():$(this).prev(".placeholder").show()}}),$("select",t.objForm).on({change:function(){this.value?$(this).prev(".placeholder").hide():$(this).prev(".placeholder").show()}})}},automaticTabindex:function(){if(!0===t.settings.automaticTabindex){var e=t.objForm.attr("id")+t.objForm.attr("class"),s=0;$("form").each((function(t,a){e!=$(a).attr("id")+$(a).attr("class")||(s=t)})),$("input,textarea,select,button",t.objForm).each((function(e,t){var a=e+1+100*s;$(t).attr("tabindex",a)}))}},prepareFileUpload:function(){$('input[type="file"]').each((function(e,s){var a=$(this).attr("id"),r=this,o=$(t.objForm).find("#file_uploader_"+e);0==o.length&&((o=document.createElement("iframe")).id=o.name="file_uploader_"+e,$(o).css({width:0,height:0,border:0,display:"block",visibility:"hidden"}),$(t.objForm).append(o)),$(this).on("change",(function(){t.loading.fadeIn(),t.clearErrors(),t.listenForSubmissionActive="file";var e=this.value;if(!e.length)return r.value="",$("#"+a+"_textname").text(t.arMsgs["label_"+r.name]),$("#"+a+"_filesize").val(""),$("#"+a+"_filename").val(""),t.listenForSubmissionActive=!0,t.loading.fadeOut(),!1;$("#"+a+"_filesize").val(""),$("#"+a+"_filename").val(e);var s=document.getElementById(a).files[0].name;$("#"+a+"_textname").text(s),this.files[0].size>t.settings.maxFileSize&&$("#"+a+"_filesize").val(this.files[0].size),$(t.objForm).attr("action",t.settings.fileUploadScript+"?fn="+t.formName+"&in="+a).attr("target",o.id).trigger("submit"),window.addEventListener(a+"_uploaded",(function(e){if(1!=e.detail.result){var s=error,o="<strong>"+t.arMsgs.warning+"</strong><br>"+e.detail.msg;if("undefined"!=typeof MESSENGER)MESSENGER.setClass(s),MESSENGER.showMessenger(o);else{if("success"===s)o='<p class="tooltip_msg success"><a class="close" role="button">'+t.arMsgs.chiudi+"</a>"+o+"</p>";else o='<p class="tooltip_msg errors" role="alertdialog"><a class="close" role="button">'+t.arMsgs.chiudi+"</a><strong>"+t.arMsgs.warning+"</strong><br>"+o+"</p>";t.tooltipMsg=$(o).appendTo(t.tooltipAnchor).show(300)}r.value="",$("#"+a+"_textname").text(t.arMsgs["label_"+r.name]),$("#"+a+"_filesize").val(""),$("#"+a+"_filename").val("")}$(t.objForm).attr("action",t.actionPage).removeAttr("target"),t.listenForSubmissionActive=!0,t.loading.fadeOut()}),!1)}))}))},listenForSubmission:function(){$(t.objForm,document).on("submit",(function(e){switch(t.listenForSubmissionActive){case!0:e.preventDefault(),t.triggerSubmission();case!1:return!1}}))},triggerSubmission:function(){t.listenForSubmissionActive=!1,$(t).trigger("submit_processing"),t.formData=t.objForm.serialize(),t.formInputs=t.objForm[0].elements,t.callback=t.parseData,t.clearErrors()},customizeSelect:function(){$(t.objForm).find(".label_select").each((function(e,t){var s=parseInt($(t).children("select").height(),10);$("<span></span>").addClass("select_cover").css("height",s).appendTo($(t))}))},parseData:function(){if(1==t.settings.validationType)t.sendData();else{if($(t.formInputs).each((function(e,s){t.validate(s)})),t.tooltipMsg.length>0)return $(t).trigger("submit_error"),t.showMessage(t.tooltipMsg,"error"),!1;0==t.settings.validationType?$(t).trigger("submit_completed",{mode:t.settings.validationType}):t.sendData()}},successCallback:function(){clearTimeout(t.t),!0===t.settings.clearFormOnSuccess&&t.resetForm()},resetForm:function(){var e;if(t.formInputs)for(var s=0,a=t.formInputs.length;s<a;s++)switch("string"==typeof(e=t.formInputs[s]).type?e.type.toLowerCase():"text"){case"checkbox":case"radio":e.checked=!1;break;case"select":e.selected=!1;break;case"file":e.value="",$("#"+e.name+"_textname")&&$("#"+e.name+"_textname").text(t.arMsgs.label_cv),$("#"+e.name+"_filename")&&$("#"+e.name+"_filename").val(""),$("#"+e.name+"_filesize")&&$("#"+e.name+"_filesize").val("");break;default:"hidden"!==e.type&&(e.value=""),(1===t.settings.placeholderFallback||2===t.settings.placeholderFallback&&$(".body").hasClass("no-placeholder"))&&$(e).prev(".placeholder").show(0)}},sendData:function(){$.ajax({url:t.actionPage,data:t.formData+"&is_ajax=1",type:"POST",dataType:"json",beforeSend:function(){t.loading.fadeIn(),$(t.objForm).find(".tooltip_msg").hide(300,(function(){$(this).remove(),t.tooltipMsg=null}))},success:function(e){if(t.loading.fadeOut(),$(".has_error").removeClass("has_error"),e.result>0){if(null!==t.sendPage){var s=document.createElement("iframe");s.style.width="0px",s.style.height="0px",document.body.appendChild(s),s.src=t.sendPage}t.settings.showMessageOnSuccess&&t.showMessage(e.msg,"success"),$(t).trigger("submit_completed",[e.msg,e.hasOwnProperty("redirect")?e.redirect:null]),t.settings.tooltipDurationOnSuccess&&(t.t=setTimeout((function(){t.clearErrors()}),t.settings.tooltipDurationOnSuccess))}else{var a=e.hasOwnProperty("callback")?e.callback:{};$(t).trigger("submit_error",{callback:a}),$(e.data).each((function(e,t){null!=t.error&&$('input[name="'+i+'"],textarea[name="'+i+'"]',document).addClass("has_error")})),t.showMessage(e.msg,"error")}},error:function(e,s,a){$(t).trigger("submit_error"),t.loading.fadeOut(),t.showMessage(t.arMsgs.errore_form_insert_data,"error")}})},showMessage:function(e,s){if(void 0===e)return!1;if("success"===s){s="success";var a='<p class="tooltip_msg success"><a class="close" role="button">'+t.arMsgs.chiudi+"</a>"+e+"</p>"}else{s="error",e="<strong>"+t.arMsgs.warning+"</strong><br>"+e;a='<p class="tooltip_msg errors" role="alertdialog"><a class="close" role="button">'+t.arMsgs.chiudi+"</a><strong>"+t.arMsgs.warning+"</strong><br>"+e+"</p>"}"undefined"!=typeof MESSENGER?(MESSENGER.setClass(s),MESSENGER.showMessenger(e)):t.tooltipMsg=$(a).appendTo(t.tooltipAnchor).show(300),"success"==s&&(t.callback=t.successCallback)},listenForTooltipRemoval:function(){$(document).on("messenger_closed",(function(){t.clearErrors()})),$(this.objForm,document).on("click",".tooltip_msg .close",(function(e){e.preventDefault(),t.clearErrors()}))},clearErrors:function(){var e=t.callback;t.callback=null,t.listenForSubmissionActive=!0,$(".has_error").removeClass("has_error"),"undefined"!=typeof MESSENGER&&MESSENGER.msg_box.hasClass("visible")&&MESSENGER.closeMessenger(),t.tooltipMsg.length?$(t.tooltipMsg).hide(300,(function(){$(this).remove(),t.tooltipMsg="",e&&e()})):e&&e()},validate:function(e){if(e.type&&e.name){var s=$(e).data("input_label")?$(e).data("input_label"):$(e).prev("span").text(),a="string"==typeof e.type?e.type.toLowerCase():"text";if($(e).data("required_if")){var r=$(e).data("required_if").split(/\_AND\_/);for(var o in r){var n="!"==r[o].substr(0,1)?"!":"",i="!"==n?r[o].substr(1):r[o];r[o].length<=0&&console.log($(e).data("required_if")+": (chiave "+o+") "+r[o]+" non ha lunghezza");var l=t.formInputs[i],c="";switch(!0){case!l&&"!"!=n:console.log("Campo "+i+" inesistente");break;case!!l:if("checkbox"===l.type)c=1==l.checked?"on":"";else c=l.value}e.required="!"==n?c.length?0:1:c.length?1:0}}if(void 0===t.validationSupport[e.name]&&(t.validationSupport[e.name]=[]),"undefined"!=typeof Modernizr){var d=!1;for(var o in Modernizr.inputtypes){if(!1===Modernizr.inputtypes[o])!0===new RegExp('type="'+o+'"',"g").test(e.outerHTML)&&(a="string"==typeof o?o.toLowerCase():"text",d=!0);if(!0===d)break}}if($(e).data("input_compare")){var u=document.querySelectorAll('*[name$="'+$(e).data("input_compare")+'"]')[0];null!=u&&u.value.length>0&&e.value!=u.value&&(this.tooltipMsg+="<strong>"+s+"</strong>: "+this.arMsgs.errore_form_fields_compare+"<br>")}if($(e).data("custom_validate")){if(e.required&&!e.value)this.tooltipMsg+="<strong>"+s+"</strong>: "+this.arMsgs.errore_form_obbligatorio+"<br>",$(e).addClass("has_error");else new RegExp($(e).data("custom_validate")).test(e.value)||(this.tooltipMsg+="<strong>"+s+"</strong>: "+this.arMsgs.errore_form_tipo_8+"<br>",$(e).addClass("has_error"))}else{var g=void 0!==e.dataset&&void 0!==e.dataset.required_custom_msg&&null!=e.dataset.required_custom_msg&&e.dataset.required_custom_msg?e.dataset.required_custom_msg:this.arMsgs.errore_form_obbligatorio;switch(a){case"checkbox":if(e.required&&!1===e.checked){this.tooltipMsg+="<strong>"+s+"</strong>: "+g+"<br>",$(e).addClass("has_error");break}!0===this.validateText(e.value)&&(this.tooltipMsg+="<strong>"+s+"</strong>: "+this.arMsgs.errore_form_tipo_3+"<br>",$(e).addClass("has_error"));break;case"radio":if(e.required&&void 0===t.validationSupport[e.name].has_value&&(t.validationSupport[e.name].has_value=t.objForm.find('input[name="'+e.name+'"]:checked').size(),t.validationSupport[e.name].has_value<=0)){this.tooltipMsg+="<strong>"+s+"</strong>: "+g+"<br>",$(e).addClass("has_error");break}!0===this.validateText(t.objForm.find('input[name="'+e.name+'"]:checked').val())&&void 0===t.validationSupport[e.name].ok_value&&(t.validationSupport[e.name].ok_value=1,this.tooltipMsg+="<strong>"+s+"</strong>: "+this.arMsgs.errore_form_tipo_3+"<br>",$(e).addClass("has_error"));break;case"select":if(e.required&&!1===e.selected){this.tooltipMsg+="<strong>"+s+"</strong>: "+g+"<br>",$(e).addClass("has_error");break}!0===this.validateText(e.value)&&(this.tooltipMsg+="<strong>"+s+"</strong>: "+this.arMsgs.errore_form_tipo_3+"<br>",$(e).addClass("has_error"));break;case"tel":if(e.required&&!e.value){this.tooltipMsg+="<strong>"+s+"</strong>: "+g+"<br>",$(e).addClass("has_error");break}!0===this.validateTel(e.value)&&(this.tooltipMsg+="<strong>"+s+"</strong>: "+this.arMsgs.errore_form_tipo_5+"<br>",$(e).addClass("has_error"));break;case"number":if(e.required&&!e.value){this.tooltipMsg+="<strong>"+s+"</strong>: "+g+"<br>",$(e).addClass("has_error");break}e.value&&(e.min&&e.value<e.min||e.max&&e.value>e.max)&&(this.tooltipMsg+="<strong>"+s+"</strong>: "+this.arMsgs.errore_form_tipo_9+"<br>",$(e).addClass("has_error")),!0===this.validateTel(e.value)&&(this.tooltipMsg+="<strong>"+s+"</strong>: "+this.arMsgs.errore_form_tipo_1+"<br>",$(e).addClass("has_error"));break;case"url":if(e.required&&!e.value){this.tooltipMsg+="<strong>"+s+"</strong>: "+g+"<br>",$(e).addClass("has_error");break}e.value.length&&!1===this.validateUrl(e.value)&&(this.tooltipMsg+="<strong>"+s+"</strong>: "+this.arMsgs.errore_form_tipo_6+"<br>",$(e).addClass("has_error"));break;case"email":if(e.required&&!e.value){this.tooltipMsg+="<strong>"+s+"</strong>: "+g+"<br>",$(e).addClass("has_error");break}e.value.length&&!1===this.validateEmail(e.value)&&(this.tooltipMsg+="<strong>"+s+"</strong>: "+this.arMsgs.errore_form_mail_0+"<br>",$(e).addClass("has_error"));break;case"date":if(e.required&&!e.value){this.tooltipMsg+="<strong>"+s+"</strong>: "+g+"<br>",$(e).addClass("has_error");break}var p=null!=$(e).data("format")?$(e).data("format"):"dd/mm/aaaa";e.value.length&&!1===this.validateDate(e.value,p)&&(this.tooltipMsg+="<strong>"+s+"</strong>: "+this.arMsgs.errore_form_date_format+" "+p+"<br>",$(e).addClass("has_error"));break;case"file":if(e.required&&!e.value){this.tooltipMsg+="<strong>"+s+"</strong>: "+g+"<br>",$(e).addClass("has_error");break}if($("#"+e.name+"_filesize").val()>t.settings.maxFileSize){this.tooltipMsg+="<strong>"+s+"</strong>: "+this.arMsgs.errore_form_filesize+" "+Math.round(100*t.settings.maxFileSize/1048576)/100+" MB<br>",$(e).addClass("has_error");break}if(e.value)switch(this.validateFile(e.value)){case 1:this.tooltipMsg+="<strong>"+s+"</strong>: "+this.arMsgs.errore_form_tipo_7+" "+t.settings.arFileTypes.join(",")+"<br>",$(e).addClass("has_error");break;case 2:this.tooltipMsg+="<strong>"+s+"</strong>: "+this.arMsgs.errore_form_tipo_4+"<br>",$(e).addClass("has_error")}break;case"hidden":break;case"password":var m="string"==typeof e.dataset.mode&&e.dataset.mode?e.dataset.mode:"Ln",h=void 0!==e.dataset.minlength&&parseInt(e.dataset.minlength,10)>0?parseInt(e.dataset.minlength,10):8,f=void 0!==e.dataset.maxlength&&parseInt(e.dataset.maxlength,10)>0?parseInt(e.dataset.maxlength,10):50,_=this.validatePassword(e.value,h,f,m);if(!0!==_){var b=this.arMsgs.errore_form_tipo_9;switch(_.code){case"empty":b=this.arMsgs.errore_form_password_empty;break;case"spaces":b=this.arMsgs.errore_form_password_s;break;case"minlength":case"maxlength":b=this.arMsgs["errore_form_password_"+_.code].replace(/\{\{n\}\}/gm,_.data);break;case"mode":var v=_.data.split(""),w=[],M="";for(var y of v){switch(y){case"l":M=this.arMsgs.errore_form_password_small_caps.replace(/\{\{n\}\}/gm,"1");break;case"L":M=this.arMsgs.errore_form_password_all_caps.replace(/\{\{n\}\}/gm,"1");break;case"n":case"N":M=this.arMsgs.errore_form_password_numbers.replace(/\{\{n\}\}/gm,"1");break;case"c":M=this.arMsgs.errore_form_password_special.replace(/\{\{list\}\}/gm,"-.!()?");break;case"C":M=this.arMsgs.errore_form_password_special.replace(/\{\{list\}\}/gm,"|-_.:!()/?*")}w.push(M)}console.log(w.join(", ")),b=this.arMsgs.errore_form_password_mode.replace(/\{\{explain\}\}/gm,w.join(", "))}this.tooltipMsg+="<strong>"+s+"</strong>: "+b+"<br>",$(e).addClass("has_error")}break;default:if(e.required&&!e.value){this.tooltipMsg+="<strong>"+s+"</strong>: "+g+"<br>",$(e).addClass("has_error");break}!0===this.validateText(e.value)&&(this.tooltipMsg+="<strong>"+s+"</strong>: "+this.arMsgs.errore_form_tipo_3+"<br>",$(e).addClass("has_error"))}}}},validateText:function(e){return/[\<\>]/.test(e)},validateTel:function(e){return/[^0-9\s\+\-\/]/.test(e)},validateNumber:function(e){return/[^0-9]/.test(e)},validateUrl:function(e){return/^(https?\:\/\/)?([a-zA-Z0-9\-\_]+\.)+([a-zA-Z0-9]+)$/.test(e)},validateEmail:function(e){return/^[\w\-\_\.]+@[\w\-\_\.]+\.[a-zA-Z]{2,}$/.test(e)},validateDate:function(e,t){var s=t.replace(/[dma]/g,"\\d");return new RegExp(s,"g").test(e)},validateFile:function(e){var s=e.split(".").pop(),a=e.replace(/\\/g,"/").replace(/.*\/{1}/,"");return t.settings.arFileTypes.indexOf(s)<0?1:!/([\+\*\?\[\^\]\$\{\}\=\!\<\>\|\:@])/.test(a)||2},validatePassword:function(e,t,s,a){if(!e||"string"!=typeof e)return{code:"empty"};if(e.length<t)return{code:"minlength",data:t};if(e.length>s)return{code:"maxlength",data:s};if(/[ \s]/.test(e))return{code:"spaces"};var r=!0;/[^lLnNcC]/.test(a)&&(a="Ln");var o=a.split(""),n=[];for(var i of o)switch(i){case"l":/[a-z]/gm.test(e)||(r=!1,n.push(i));break;case"L":/[a-z]/gm.test(e)||(r=!1,n.push(i+" [a-z]")),/[A-Z]/gm.test(e)||(r=!1,n.push(i+" [A-Z]"));break;case"n":case"N":/[0-9]/gm.test(e)||(r=!1,n.push(i));break;case"c":/[\-\.!\(\)\?]/gm.test(e)||(r=!1,n.push(i));break;case"C":/[|\-_\.:!\(\)\/\\\\?\*]/gm.test(e)||(r=!1,n.push(i));break;default:r=!1,n.push(i)}return!0===r||{code:"mode",data:a}}};return(t=s).construct(),t},MyCart=function(e){var t,s={settings:$.extend({btns:'*[data-role="ecomm_btn"]',reload_time_ok:null,reload_time_ko:null,development:0,refreshViewCallback:null,reloadOnMessengerClosed:!1,beforeSend:function(){},afterSend:function(){}},e),btns:null,currentBtn:null,currentPage:null,GAECManager:null,useGAECManager:!1,reloadOnMessengerClosed:!1,__construct:function(){t.btns=t.settings.btns,t.settings.reload_time_ok=null!==t.settings.reload_time_ok?t.settings.reload_time_ok:SETTINGS.reload_time_ok?SETTINGS.reload_time_ok:3e3,t.settings.reload_time_ko=null!==t.settings.reload_time_ko?t.settings.reload_time_ko:SETTINGS.reload_time_ko?SETTINGS.reload_time_ko:3e3,t.reloadOnMessengerClosed=t.settings.reloadOnMessengerClosed,$(document).on("click",t.btns,(function(e){switch(e.preventDefault(),t.currentBtn=$(this),null!==t.GAECManager&&void 0!==t.GAECManager&&(t.GAECManager.currentPage=t.currentBtn.data("page")?t.currentBtn.data("page"):"Dettaglio prodotto"),t.currentBtn.data("type")){case"submit":t.submitData();break;case"spinner":t.setNewValue();break;default:t.followLink()}}));$(t.btns).siblings("input");t.reloadOnMessengerClosed&&$(document).on("messenger_closed",(function(){t.reloadPage(1e3)}))},submitData:function(){var e=t.currentBtn.attr("form")?$("#"+t.currentBtn.attr("form").toString().replace(/^#/,"")):t.currentBtn.closest("form"),s=void 0!==e.attr("method")?e.attr("method").toLowerCase():"get",a=e.serialize()+"&is_ajax=1",r=e.attr("action");t.sendData(r,s,a,"submit")},setNewValue:function(e){var s=e||t.currentBtn.siblings("input"),a=void 0!==s[0].dataset.max_sellable?parseInt(s[0].dataset.max_sellable,10):9999,r=parseInt(s.val(),10)>0?parseInt(s.val(),10):0,o=r;if(null!=t.currentBtn){var n=t.currentBtn.hasClass("sum")?1:-1;if((o=r+n<=0?0:r+n)==r)return!1}var i=a-o,l=o<=0?0:i<=0?a:o;if(s.val(l),i<0)return t.raiseError(window.arTrads.error_max_sellable),!1;$(document).trigger("cart_changed",s)},followLink:function(){var e=t.currentBtn.attr("href")+(-1!=t.currentBtn.attr("href").indexOf("?")?"&is_ajax=1":"?is_ajax=1");t.sendData(e,"get",null,"followLink")},sendData:function(e,s,a,r){var o={url:e,type:s,data:a,dataType:"JSON",beforeSend:function(){t.settings.beforeSend()},success:function(e){t.useGAECManager=!(!e.hasOwnProperty("data")||"object"!=typeof e.data||null===t.GAECManager),!0===t.useGAECManager&&t.sendDataToGa(e.data),1!=e.result&&t.raiseError(e.msg)},error:function(e,s,a){t.raiseError()},complete:function(e){sourceObj=t.currentBtn,eventType=r,t.settings.afterSend(sourceObj,eventType,e.responseJSON)}};null===a&&delete o.data,$.ajax(o)},raiseError:function(e){MESSENGER.setClass("error"),void 0!==e&&e.length>0?MESSENGER.showMessenger(e):MESSENGER.showMessenger(arTrads.update_cart_error),setTimeout((function(){MESSENGER.closeMessenger()}),t.settings.reload_time_ko)},reloadPage:function(e){void 0===e&&(e=t.settings.reload_time_ok),!0===t.useGAECManager?(t.useGAECManager=!1,$(document).on("gaHitCompleted",(function(){setTimeout((function(){window.location.reload()}),e)}))):setTimeout((function(){window.location.reload()}),e)},sendDataToGa:function(e){try{t.GAECManager.populateCart(e)}catch(e){t.exceptionCatcher(e)}},exceptionCatcher:function(e){console&&console.debug("[MyCart"+(null!=this.caller?"."+this.caller+"()":"")+"]",e),1==t.settings.development&&alert("error")}};return t=s,s.__construct(),s},Loading=function(e){var t,s={settings:$.extend({animationDuration:1e3},e),loadingObj:null,__construct:function(){t.loadingObj=document.createElement("div"),t.loadingObj.className="loading_popup loading",t.loadingObj.style.width="100%",t.loadingObj.style.height="100%",t.loadingObj.style.display="none",t.loadingObj.style.position="fixed",t.loadingObj.style.top="0px",t.loadingObj.style.left="0px",t.loadingObj.style.zIndex="1000",t.loadingObj.style.opacity="0",t.loadingObj.style.transition="opacity "+t.settings.animationDuration/1e3+"s";var e=document.querySelector("body");e.insertBefore(t.loadingObj,e.firstChild)},transitionIn:function(e){t.loadingObj.style.display="block",t.loadingObj.style.opacity=".9",e&&setTimeout((function(){e()}),t.settings.animationInDuration)},transitionOut:function(e){t.loadingObj.style.opacity="0",setTimeout((function(){t.loadingObj.style.display="none",e&&e()}),t.settings.animationDuration)}};return t=s,s.__construct(),s};$((function(){var e=null,t=1,s=0,a=0,r={};$(window).on("resize",(function(){var t=window.windowWidth<768?"mobile":"desktop";e!=t&&(e=t,$(document).trigger("animation_status_changed"))})),$(document).trigger("animation_status_changed"),$(document).on("animation_status_changed",(function(){Modernizr.cssanimations&&Modernizr.csstransforms&&Modernizr.opacity&&Modernizr.csstransitions&&$("[data-animscroll]").each((function(){if($(this).attr("data-as-animation")||$(this).attr("data-as-animation","fadeInUp"),"desktop"===e)t=0,s=$(this).attr("data-as-delay")?$(this).attr("data-as-delay"):0,a=$(this).attr("data-as-duration")?$(this).attr("data-as-duration"):500,r={offset:$(this).attr("data-as-offset")?$(this).attr("data-as-offset"):"90%",handler:function(e){$(this.element).addClass("animated "+$(this.element).attr("data-as-animation"))}};else t=1,s=0,a=0,r={offset:0,handler:function(e){this.destroy()}};$(this).css("opacity",t).css("animation-delay",s).css("animation-duration",a).waypoint(r)}))}))}));var FormFiller=function(t){var s,a={settings:$.extend({urlDataRegister:null,objForm:null,autoRegisterMode:1,formRegisterMode:1},t),formInputs:null,trigger:null,blocco:0,__construct:function(){if(null===s.settings.urlDataRegister||null===s.settings.objForm)throw"[FormFiller.__construct] Manca sia l'url dove salvare i dati sia i form di cui ascoltare gli input.";if(!s.settings.objForm.length)throw"[FormFiller.__construct] L'oggetto objForm non è presente nella pagina.";s.loadInputs().listenInputs()},loadInputs:function(){try{return s.formInputs=s.settings.objForm instanceof jQuery?s.settings.objForm[0].elements:s.settings.objForm.elements,s}catch(e){return console.debug(e),s}},listenInputs:function(){s.formInputs&&1==s.settings.autoRegisterMode&&$(s.formInputs).on("change",(function(e){if(s.blocco)return!1;if("fieldset"===this.type.toLowerCase())return!1;if(s.blocco=1,s.trigger=this.name,s.sourceObj=$(this),0===s.settings.formRegisterMode)s.registerAllValues();else s.registerValue(this)}))},registerValue:function(t){if(!t)throw"[FormFiller.registerValue] Manca l'input di cui registrare il valore";switch(t.type.toLowerCase()){case"checkbox":case"radio":case"select":"change"==e.type&&s.sendData(t.name+"="+t.value);break;case"file":case"password":break;default:"blur"==e.type&&s.sendData(t.name+"="+t.value)}s.blocco=0},registerAllValues:function(){var e=s.settings.objForm instanceof jQuery?s.settings.objForm.serialize():$(s.settings.objForm).serialize();s.sendData(e),s.blocco=0},sendData:function(e){if(!e||!e.length)throw"[FormFiller.sendData] Nessun dato da inviare";$(document).trigger("form_filler_start",s.trigger),$.ajax({url:s.settings.urlDataRegister,data:e,type:"POST",dataType:"json",success:function(e){s.blocco=0,$(document).trigger("form_filler_success",[s.trigger,s.sourceObj])},error:function(e,t,a){s.blocco=0,$(document).trigger("form_filler_error",[s.trigger,s.sourceObj]),console&&console.debug(e,t,a)}})}};return s=a,a.__construct(),a};
//# sourceMappingURL=main.js.map